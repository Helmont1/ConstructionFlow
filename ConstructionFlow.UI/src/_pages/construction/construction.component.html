<app-left-navbar></app-left-navbar>
<section class="register" style="background-color: lightgray">
  <div class="register-container">
    <h1>Cadastrar nova obra</h1>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate style="width: 100%">
      <div class="register-field">
        <p>Nome da obra</p>
        <div class="input">
          <i class="fa-regular fa-building"></i>
          <input type="text" placeholder="Digite o nome da obra" id="name" name="name" formControlName="name" />
        </div>
      </div>
      <div class="register-field">
        <p>Atividades</p>
        <!-- <button (submit)="">
          <i class="fa-regular fa-plus"></i>
          Adicionar atividade
        </button> -->
        <div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">
          <table>
            @for (activity of activities; track activity) {
            <tr>
              <div class="example-box" cdkDrag>{{activity.defaultActivity?.icon}} -
                {{activity.defaultActivity?.defaultActivityName}}</div>
            </tr>

            }
          </table>
        </div>
      </div>
      <div class="register-field">
        <p>Data de ínicio:</p>
        <div class="input">
          <i class="fa-regular fa-calendar"></i>
          <input type="date" formControlName="startDate" id="startDate" class="form-control"
            placeholder="Digite a data de ínicio" required />
        </div>
        <div class="warning" *ngIf="
            registerForm.get('startDate')?.invalid &&
            (registerForm.get('startDate')?.dirty ||
              registerForm.get('startDate')?.touched)
          ">
          <p>Campo obrigatório</p>
        </div>
      </div>
      <div class="register-field">
        <p>Data de fim:</p>
        <div class="input">
          <i class="fa-regular fa-calendar"></i>
          <input type="date" formControlName="endDate" id="endDate" placeholder="Digite a data de fim" required />
        </div>
        <div class="warning" *ngIf="
            registerForm.get('endDate')?.invalid &&
            (registerForm.get('endDate')?.dirty ||
              registerForm.get('endDate')?.touched)
          ">
          <p>Campo obrigatório</p>
        </div>
      </div>
      <div class="register-field">
        <p>CNPJ/CPF do cliente:</p>
        <div class="input">
          <i class="fa-regular fa-building"></i>
          <input type="text" formControlName="register" id="register" placeholder="Digite o CNPJ ou CPF do cliente"
            [mask]="
              registerForm.get('register')?.value &&
              registerForm.get('register')?.value.length <= 11
                ? '000.000.000-009'
                : '00.000.000/0000-00'
            " required />
        </div>
        <div class="warning" *ngIf="
            registerForm.get('register')?.invalid &&
            (registerForm.get('register')?.dirty ||
              registerForm.get('register')?.touched)
          ">
          <p *ngIf="registerForm.get('register')?.errors?.required">
            Campo obrigatório
          </p>
          <p *ngIf="
              registerForm.get('register')?.errors?.mask &&
              registerForm.get('register')?.touched
            ">
            CNPJ/CPF inválido
          </p>
        </div>
      </div>
      <button class="btn" type="submit" [disabled]="!registerForm.valid">Cadastrar</button>
    </form>
  </div>
</section>
